        function selectRandomQuestions() {
            const shuffled = [...allQuestions].sort(() => Math.random() - 0.5);
            selectedQuestions = shuffled.slice(0, 5); // Adjusted to pick the first 5 questions for demonstration.
        }

        function loadQuestion() {
            const quizDiv = document.getElementById("quiz");
            const current = selectedQuestions[currentQuestionIndex];
            quizDiv.innerHTML = `
                <div class="question">
                    <p>${current.question}</p>
                    ${current.options
                        .map((option, index) => `<div><input type="radio" name="answer" value="${option}" id="option${index}">
                        <label for="option${index}">${option}</label></div>`)
                        .join("")}
                </div>`;
        }

        function nextQuestion() {
            const selected = document.querySelector('input[name="answer"]:checked');
            if (!selected) {
                alert("Please select an answer before proceeding!");
                return;
            }

            const userAnswer = selected.value;
            if (userAnswer === selectedQuestions[currentQuestionIndex].correct) {
                score++;
            } else {
                incorrectAnswers.push({
                    question: selectedQuestions[currentQuestionIndex].question,
                    correct: selectedQuestions[currentQuestionIndex].correct,
                    userAnswer: userAnswer
                });
            }

            currentQuestionIndex++;

            if (currentQuestionIndex < selectedQuestions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            const quizDiv = document.getElementById("quiz");
            const resultDiv = document.getElementById("result");

            quizDiv.innerHTML = "";

            resultDiv.innerHTML = `
                <h2>Your Score: ${score}/${selectedQuestions.length}</h2>
                ${
                    incorrectAnswers.length > 0
                        ? `<h3>Incorrect Answers:</h3>` +
                          incorrectAnswers
                              .map(
                                  (item) => ` 
                                      <div class="incorrect">
                                        <p><strong>Question:</strong> ${item.question}</p>
                                        <p><strong>Your Answer:</strong> <span class="user-answer">${item.userAnswer}</span></p>
                                        <p><strong>Correct Answer:</strong> <span class="correct-answer">${item.correct}</span></p>
                                    </div>`
                              )
                              .join("")
                        : `<h3>ðŸŽ‰ Perfect Score! Well done! ðŸŽ‰</h3>`
                }
            `;

            document.getElementById("nextBtn").style.display = "none";
            document.getElementById("restartBtn").style.display = "block";
        }

        function restartQuiz() {
            score = 0;
            incorrectAnswers = [];
            currentQuestionIndex = 0;
            document.getElementById("result").innerHTML = "";
            document.getElementById("nextBtn").style.display = "block";
            document.getElementById("restartBtn").style.display = "none";
            selectRandomQuestions(); // Ensure questions are selected
            loadQuestion(); // Reload the first question
        }

        // Initialize the quiz
        selectRandomQuestions();
        loadQuestion();
